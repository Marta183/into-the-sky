COMMENT ON DATABASE postgres IS 'default administrative connection database';

CREATE TABLE IF NOT EXISTS app_users (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    email VARCHAR(200) NOT NULL UNIQUE,
    password VARCHAR(129) NOT NULL,
    name VARCHAR(120)
);

ALTER TABLE app_users OWNER TO postgres;

CREATE TABLE IF NOT EXISTS external_project (
    id VARCHAR(200) NOT NULL PRIMARY KEY,
    name VARCHAR(120) NOT NULL
);

ALTER TABLE external_project OWNER TO postgres;

CREATE TABLE IF NOT EXISTS user_external_project (
    user_id BIGINT NOT NULL REFERENCES app_users,
    external_project_id VARCHAR(200) NOT NULL REFERENCES external_project,
    PRIMARY KEY (user_id, external_project_id)
);

ALTER TABLE user_external_project OWNER TO postgres;
